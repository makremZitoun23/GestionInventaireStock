name: BuildJavaApp-PushImageToHub-RunImageOnAzVM
env:
  IMAGE_NAME: makremzitoun/inventory-app
on:
 push:
    branches: ['master']
 pull_request:
    branches: ['master']
 workflow_dispatch:
defaults:
    run:
     working-directory: ./terraform
jobs:
  Build-Java-App-With-Gradle:
    runs-on: ubuntu-latest
    steps:
     
     - uses: actions/checkout@v3
     - uses: hashicorp/setup-terraform@v3

     - name: Terraform fmt
       id: fmt
       run: terraform fmt -check
       continue-on-error: true

     - name: Terraform Init
       id: init
       run: terraform init

     - name: Terraform Validate
       id: validate
       run: terraform validate -no-color

     - name: Terraform Plan
       id: plan
       run: terraform plan -no-color
       continue-on-error: true
     
          
